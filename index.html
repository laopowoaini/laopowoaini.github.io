<!DOCTYPE html>
<html lang="zh">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>给老婆酱的一封信</title>
</head>
<body>
    <div id="fps">00.0</div>
    <font id="text">给老婆酱的一封信</font>
    <div id="letter">
        <div id="l-main"></div>
        <div id="tips">点我把信拿出来</div>
        <img src="l-cover.svg" id="l-cover"></img>
        <div id="l-body"></div>
        <div id="l-circle"></div>
        <font id="l-cfont" onclick="openletter()">开</font>
    </div>
    <textarea id="l-words" readonly>宝宝，。。
        。。
        。。
    </textarea>
    <next id="next">继续</next>
    <font id="loveyou">叶子渲我爱你!</font>
    <canvas id="fireworks"></canvas>
    <div id="black"></div>
    <div id="load">
        <div class="main">
            <div id="heart"></div>
        </div>
    </div>
    <script src="fps.js"></script>
    <script src="fireworks.js"></script>
    <script>
        document.body.onload = function(){
            setTimeout(function(){
                document.getElementById("load").style.opacity = "0";
                setTimeout(function(){
                    document.getElementById("load").style.display = "none";
                }, 500);
            }, 2000);
        }

        function getById(id){return document.getElementById(id);}

        const openletter = function(){
            getById("text").style.top = "100px";
            getById("text").style.fontSize = "30px";
            getById("l-circle").style.opacity = "0";
            getById("l-cfont").style.opacity = "0";

            getById("l-cover").style.transform = "rotate3d(1,0,0,-180deg) translateY(-10px)";

            setTimeout(function(){
                getById("l-cover").style.zIndex = "3";
            },1000);

            setTimeout(function(){
                getById("l-main").style.height = "258px";
                getById("tips").style.opacity = ".2";
            },1500);
        }

        getById("l-main").addEventListener("click", function(){
            getById("tips").style.opacity = "0";
            getById("l-main").style.bottom = "200px";
            setTimeout(function(){
                getById("l-main").style.zIndex = "50";
            },1000)
            setTimeout(function(){
                getById("l-main").style.bottom = "0px";
            }, 1000);
            setTimeout(function(){
                getById("l-main").style.transform = "scale(10)";
            }, 2000);

            setTimeout(function(){
                getById("l-words").style.zIndex = "6000";
                getById("l-words").style.opacity = "1";
            }, 3000);

            setTimeout(function(){
                getById("letter").remove();
                getById("next").style.opacity = "1";
            }, 4000);
        });

        getById("next").addEventListener("click",function(){
            // disappear all element
            getById("l-words").style.display = "none";
            getById("next").style.display = "none";
            getById("text").style.display = "none";
            document.body.style.backgroundColor = "black";
            setTimeout(function(){
                getById("loveyou").style.opacity = "1";
                getById("load").style.backgroundColor = "transparent";
                getById("load").style.opacity = "1";
                getById("load").style.display = "block";
                fireworkon();
            }, 1000);
        })
    </script>
</body>
</html>